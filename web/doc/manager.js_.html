<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: home/manager.js</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="keyword" content="" />
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    <meta property="og:site_name" content=""/>
    <meta property="og:url" content=""/>
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"Beloola","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"","description":"","keyword":""}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">Beloola</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="ActionHelper">
            <span class="title">
                <a href="ActionHelper.html">ActionHelper</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ActionHelper#execute"><a href="ActionHelper.html#execute">execute</a></li>
            
                <li data-name="ActionHelper#redirectHome"><a href="ActionHelper.html#redirectHome">redirectHome</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="GameAction">
            <span class="title">
                <a href="GameAction.html">GameAction</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="GameAction#updateResult"><a href="GameAction.html#updateResult">updateResult</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="GameManager">
            <span class="title">
                <a href="GameManager.html">GameManager</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="GameManager#dieReady"><a href="GameManager.html#dieReady">dieReady</a></li>
            
                <li data-name="GameManager#redirectHome"><a href="GameManager.html#redirectHome">redirectHome</a></li>
            
                <li data-name="GameManager#replay"><a href="GameManager.html#replay">replay</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="GameManager#finish"><a href="GameManager.html#finish">finish</a></li>
            
                <li data-name="GameManager#init"><a href="GameManager.html#init">init</a></li>
            
                <li data-name="GameManager#valid"><a href="GameManager.html#valid">valid</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="HomeAction">
            <span class="title">
                <a href="HomeAction.html">HomeAction</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="HomeAction#play"><a href="HomeAction.html#play">play</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="HomeManager">
            <span class="title">
                <a href="HomeManager.html">HomeManager</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="HomeManager#changeCategory"><a href="HomeManager.html#changeCategory">changeCategory</a></li>
            
                <li data-name="HomeManager#init"><a href="HomeManager.html#init">init</a></li>
            
                <li data-name="HomeManager#showOptionContainer"><a href="HomeManager.html#showOptionContainer">showOptionContainer</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            <span class="subtitle">Events</span>
            
                <li data-name="HomeManager#event:changeCategory"><a href="HomeManager.html#event:changeCategory">changeCategory</a></li>
            
                <li data-name="HomeManager#event:fontReady"><a href="HomeManager.html#event:fontReady">fontReady</a></li>
            
                <li data-name="HomeManager#event:launchGame"><a href="HomeManager.html#event:launchGame">launchGame</a></li>
            
                <li data-name="HomeManager#event:selectCategory"><a href="HomeManager.html#event:selectCategory">selectCategory</a></li>
            
                <li data-name="HomeManager#event:selectDifficulty"><a href="HomeManager.html#event:selectDifficulty">selectDifficulty</a></li>
            
                <li data-name="HomeManager#event:selectGame"><a href="HomeManager.html#event:selectGame">selectGame</a></li>
            
                <li data-name="HomeManager#event:selectLang"><a href="HomeManager.html#event:selectLang">selectLang</a></li>
            
                <li data-name="HomeManager#event:setActionAvailable"><a href="HomeManager.html#event:setActionAvailable">setActionAvailable</a></li>
            
                <li data-name="HomeManager#event:showCategoryContainer"><a href="HomeManager.html#event:showCategoryContainer">showCategoryContainer</a></li>
            
                <li data-name="HomeManager#event:showNextCategory"><a href="HomeManager.html#event:showNextCategory">showNextCategory</a></li>
            
            </ul>
        </li>
    
        <li class="item" data-name="LoginAction">
            <span class="title">
                <a href="LoginAction.html">LoginAction</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="LoginAction#user"><a href="LoginAction.html#user">user</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="LoginManager">
            <span class="title">
                <a href="LoginManager.html">LoginManager</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="LoginManager#init"><a href="LoginManager.html#init">init</a></li>
            
                <li data-name="LoginManager#logUser"><a href="LoginManager.html#logUser">logUser</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            <span class="subtitle">Events</span>
            
                <li data-name="LoginManager#event:logUserSuccess"><a href="LoginManager.html#event:logUserSuccess">logUserSuccess</a></li>
            
                <li data-name="LoginManager#event:validLogin"><a href="LoginManager.html#event:validLogin">validLogin</a></li>
            
            </ul>
        </li>
    
        <li class="item" data-name="SoundHelper">
            <span class="title">
                <a href="SoundHelper.html">SoundHelper</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="SoundHelper#init"><a href="SoundHelper.html#init">init</a></li>
            
                <li data-name="SoundHelper#play"><a href="SoundHelper.html#play">play</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            <span class="subtitle">Events</span>
            
                <li data-name="SoundHelper#event:playSound"><a href="SoundHelper.html#event:playSound">playSound</a></li>
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="manager.js_.html">Source: home/manager.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/*global HomeAction, AnimationHelper */
"use strict";
/**
 * @class HomeManager
 * @constructor
 * @property {Boolean}			[_isAvailable=true]							to know if action is available
 * @property {String}			[gameName=""]								name of the game selectioned
 * @property {Number}			[gameId=0]									Id of the game selectioned
 * @property {Number}			[_fontLoadingSpeed=100]						font loading time speed in ms
 * @property {HomeAction}		[homeAction = new HomeAction()]				Instance of HomeAction
 * @property {AnimationHelper}	[animationHelper = new AnimationHelper()]	Instance of AnimationHelper
 * @description Manage homepage
 */
var HomeManager = function(){
	this._isAvailable = true;
	this._fontLoadingSpeed = 100;
	this.gameName = "";
	this.gameId = 0;
	this.homeAction = new HomeAction();
	this.animationHelper = new AnimationHelper();
	this.init();
};

/** initialize events */
HomeManager.prototype.init = function(){
	var that = this;

	/** assign events */
	$(".up, .down").mousedown(changeCategory);
	$(".category").mousedown(selectCategory);
	$(".game").mousedown(selectGame);
	$(".difficulty").mousedown(selectDifficulty);
	$(".lang").mousedown(selectLang);
	$(".play").mousedown(launchGame);

	/**
     * @name HomeManager#changeCategory
     * @event
     * @description change category switch direction mousedown
     */
	function changeCategory(){
		if(!that._isAvailable){
			return false;			
		}

		that._isAvailable = false;
		var className = $(this).attr("class");
		that.changeCategory(className, ".category");
	}

	/**
     * @name HomeManager#selectCategory
     * @event
     * @description show option interface on category selection mousedown
     */
	function selectCategory(){	
		that.showOptionContainer($(this).attr("name"));
	}

	/**
     * @name HomeManager#selectGame
     * @event
     * @description show option interface or category container switch game selection mousedown
     */
	function selectGame(){
		that.gameId = Number($(this).attr("id"));
		that.gameName = $(this).attr("name");

		/** switch game */
		switch(that.gameId){
			case 2 :
				$(".langContainer").hide();
				that.showOptionContainer($(this).text());
				break;

			default :
				that.animationHelper.hide($(this).parent(), showCategoryContainer);
				break;
		}

		/**
		 * @name HomeManager#showCategoryContainer
		 * @event
		 * @description show category container on game container hide
		 */
		function showCategoryContainer(){
			that.animationHelper.show($(".categoryContainer"));
		}

	}
	
	/**
	 * @name HomeManager#selectDifficulty
	 * @event
	 * @description select difficulty on mousedown
	 */
	function selectDifficulty(){
		if(!$(this).hasClass("selected")){
			$(".difficulty").removeClass("selected");
			$(this).addClass("selected");
		}
	}

	/**
	 * @name HomeManager#selectLang
	 * @event
	 * @description select lang on mousedown
	 */	
	function selectLang(){
		if(!$(this).hasClass("selected")){
			$(".lang").removeClass("selected");
			$(this).addClass("selected");
		}
	}

	/**
	 * @name HomeManager#launchGame
	 * @event
	 * @description launch game on mousedown
	 */	
	function launchGame(){
		that.homeAction.play(that.gameName, {
			lang			: $(".lang.selected").attr("id"),
			difficultyId	: $(".difficulty.selected").attr("id"),
			categoryId		: $(".category:not(.hide)").attr("id"),
			gameId			: that.gameId
		});
	}						

};

/**
 * @description show option container on game select
 * @param  {String} title title of the option container
 */
HomeManager.prototype.showOptionContainer = function(title){
	var optionContainer = $(".optionContainer");

	/** initialize configuration interface */
	optionContainer.find(".title").text(title);	
	optionContainer.parent().removeClass("hide");
	setTimeout(fontReady, this._fontLoadingSpeed);

	/**
	 * @name HomeManager#fontReady
	 * @event
	 * @description center option container on font ready
	 */	
	function fontReady(){
		optionContainer.css({
			top:"calc(50% - "+(optionContainer.outerHeight()/2)+"px)"
		});
	}

};

/**
 * @description change category on mousedown
 * @param  {String} direction [description]
 * @param  {String} className [description]
 */
HomeManager.prototype.changeCategory = function(direction, className){
	var that = this;
	var cat = $(className+":not(.hide)");
	var newCat = (direction === "up") ? cat.prev(className) : cat.next(className);	

	if(newCat.length > 0){
		this.animationHelper.hide(cat, showNextCategory);
	}

	/**
	 * @name HomeManager#showNextCategory
	 * @event
	 * @description show next category
	 */
	function showNextCategory(){
		that.animationHelper.show(newCat, setActionAvailable);

		/**
		 * @name HomeManager#setActionAvailable
		 * @event
		 * @description change private value to set action available
		 */
		function setActionAvailable(){
			that._isAvailable = true;
		}

	}

};</code></pre>
        </article>
    </section>





        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Wed Jan 14 2015 03:23:12 GMT+0100 (CET)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>